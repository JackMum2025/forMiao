<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>答对问题才能阅读博客</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            background-color: #f4f4f4;
            overflow: hidden;
        }
        #content { display: none; }
        iframe, audio { display: none; }
        .gif-container img {
            position: absolute;
            width: 100px;
            animation: fall linear infinite;
            will-change: transform, opacity; /* 优化性能 */
        }
        @keyframes fall {
            from { transform: translateY(-100px); opacity: 1; }
            to { transform: translateY(100vh); opacity: 0; }
        }
    </style>
</head>
<body>
    <h2>请回答以下问题才能查看博客内容：</h2>
    <p>1. 我们最长一起吃的是什么？</p>
    <input type="text" id="q1" placeholder="请输入答案">
    <p>2. 我每天会提醒你吃的是什么？</p>
    <input type="text" id="q2" placeholder="请输入答案">
    <p>3. 你的代表性公仔是什么名字？</p>
    <input type="text" id="q3" placeholder="请输入答案">
    <p>4. 我目前要弹给你听的钢琴曲是什么名字？</p>
    <input type="text" id="q4" placeholder="请输入答案">
    <br><br>
    <button onclick="checkAnswers()">提交</button>

    <div id="content">
        <h2>🎉 欢迎！你答对了问题！</h2>
        <img src="https://example.com/reward.jpg" alt="奖励图片" style="max-width: 80%;">
        <h2>📖 今日日记</h2>
        <pre id="diary-content">加载中...</pre>
    </div>

    <!-- GIF 飘落效果 -->
    <div class="gif-container"></div>

    <!-- 背景音乐 -->
    <audio id="bgMusic" loop>
        <source id="musicSource" src="https://example.com/music.mp3" type="audio/mpeg">
    </audio>

    <script>
        // GIF 飘落效果
        function createFallingGifs() {
            const gifUrls = [
                "https://example.com/gif1.gif",
                "https://example.com/gif2.gif",
                // 其他 GIF 链接
            ];
            const container = document.querySelector(".gif-container");
            let isAnimating = true;

            function animate() {
                if (!isAnimating) return;

                const img = document.createElement("img");
                img.src = gifUrls[Math.floor(Math.random() * gifUrls.length)];
                img.style.left = Math.random() * 100 + "vw";
                img.style.animationDuration = Math.random() * 3 + 2 + "s";
                img.style.willChange = "transform, opacity";
                container.appendChild(img);

                setTimeout(() => img.remove(), 5000);

                if (container.children.length < 10) {
                    requestAnimationFrame(animate);
                } else {
                    setTimeout(() => requestAnimationFrame(animate), 500);
                }
            }

            animate();

            return {
                start: () => {
                    isAnimating = true;
                    animate();
                },
                stop: () => {
                    isAnimating = false;
                }
            };
        }

        let fallingGifs = createFallingGifs();

        // 答案检查
        function checkAnswers() {
            let q1 = document.getElementById("q1").value.trim().toLowerCase();
            let q2 = document.getElementById("q2").value.trim().toLowerCase();
            let q3 = document.getElementById("q3").value.trim().toLowerCase();
            let q4 = document.getElementById("q4").value.trim().toLowerCase();

            const correctAnswers = {
                q1: ["mcdonalds", "mcd"],
                q2: ["vitamin c", "vit c"],
                q3: ["一二"],
                q4: ["童话"]
            };

            let isQ1Correct = correctAnswers.q1.some(answer => q1.includes(answer));
            let isQ2Correct = correctAnswers.q2.some(answer => q2.includes(answer));
            let isQ3Correct = correctAnswers.q3.some(answer => q3.includes(answer));
            let isQ4Correct = correctAnswers.q4.some(answer => q4.includes(answer));

            if (isQ1Correct && isQ2Correct && isQ3Correct && isQ4Correct) {
                document.getElementById("content").style.display = "block";
                changeMusic();
                loadDiary();
                fallingGifs.start();
            } else {
                let wrongQuestions = [];
                if (!isQ1Correct) wrongQuestions.push("问题 1");
                if (!isQ2Correct) wrongQuestions.push("问题 2");
                if (!isQ3Correct) wrongQuestions.push("问题 3");
                if (!isQ4Correct) wrongQuestions.push("问题 4");
                alert(`以下问题回答错误：${wrongQuestions.join(", ")}，请再试试！`);
            }
        }

        // 其他函数（changeMusic、loadDiary 等）保持不变
    </script>
</body>
</html>
